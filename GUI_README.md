# JavaFX GUI 聊天客户端

这个项目现在支持 JavaFX GUI 界面，提供了更加友好的用户体验。

## 功能特性

### GUI 界面特性
- **用户友好的登录界面**：启动时弹出登录对话框，要求输入用户名、服务器地址和端口
- **现代化的主界面**：
  - 顶部菜单栏：包含"创建房间"和"修改房间密码"功能
  - 左侧房间列表：显示所有可用房间，当前房间以蓝色背景高亮显示
  - 右侧聊天区域：上方显示聊天记录，下方是消息输入框和发送按钮
- **字体设计**：全局使用 Noto Sans SC 字体，保证中文显示效果
- **实时更新**：自动获取房间列表，实时显示聊天消息和用户进出提醒

### 对话框功能
1. **登录对话框**
   - 输入用户名（仅支持字母、数字、下划线）
   - 配置服务器地址和端口
   - 实时验证输入格式
   - 显示错误信息（如用户名被占用等）

2. **创建房间对话框**
   - 输入房间名称（仅支持字母、数字、下划线）
   - 可选设置房间密码
   - 实时验证房间名格式

3. **加入房间对话框**
   - 双击房间列表中的房间触发
   - 如需密码则输入密码加入

4. **修改房间密码对话框**
   - 仅房间创建者可使用
   - 可设置新密码或清空密码

### 消息显示
- **消息格式**：[时间] 用户名: 消息内容
- **系统消息**：用户进入/离开房间的提醒，以橙色字体显示
- **自动滚动**：新消息自动滚动到底部

## 编译和运行

### 1. 编译项目
```bash
mvn clean package
```

编译完成后会生成三个 jar 文件：
- `target/chat-server.jar` - 服务器端
- `target/chat-client.jar` - 命令行客户端
- `target/chat-gui-client.jar` - GUI 客户端

### 2. 启动服务器
```bash
java -jar target/chat-server.jar
```

### 3. 启动 GUI 客户端
```bash
java -jar target/chat-gui-client.jar
```

### 4. 使用 Maven 插件运行（开发环境）
```bash
# 运行 GUI 客户端
mvn javafx:run

# 运行服务器
mvn exec:java -Dexec.mainClass="com.example.chat.server.ChatServer"

# 运行命令行客户端
mvn exec:java -Dexec.mainClass="com.example.chat.client.ChatClient"
```

## 使用说明

### 第一次使用
1. 启动服务器
2. 启动 GUI 客户端
3. 在登录对话框中输入用户名（默认连接 localhost:8888）
4. 点击确认登录

### 创建和加入房间
1. 使用菜单栏的"创建房间"功能创建新房间
2. 双击左侧房间列表中的房间名加入房间
3. 加入房间后，右上角会显示当前房间名
4. 在下方输入框中输入消息，点击发送按钮或按回车发送

### 房间管理
- 只有房间创建者可以修改房间密码
- 房间在最后一个用户离开后自动销毁
- 系统会实时显示用户进出房间的消息

## 技术特性

### JavaFX 组件
- `BorderPane`：主布局容器
- `MenuBar`：顶部菜单
- `ListView`：房间列表
- `TextFlow`：聊天消息显示
- `TextArea`：消息输入
- `Dialog`：各种对话框

### 样式设计
- CSS 文件：`src/main/resources/css/chat.css`
- 全局字体：Noto Sans SC
- 响应式布局，支持窗口大小调整
- 最小窗口尺寸：800x600

### 并发处理
- 消息接收使用独立线程
- 使用 `Platform.runLater()` 确保 UI 更新在 JavaFX 应用线程中执行
- 线程安全的消息处理机制

## 兼容性说明

- 该 GUI 客户端与原有的命令行客户端完全兼容
- 可以同时运行多个不同类型的客户端
- 服务器端无需任何修改即可支持 GUI 客户端
- GUI 客户端和命令行客户端可以互相通信

## 系统要求

- Java 21 或更高版本
- JavaFX 21
- 支持 Noto Sans SC 字体的操作系统